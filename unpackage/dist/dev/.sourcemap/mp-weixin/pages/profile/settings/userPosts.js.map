{"version":3,"file":"userPosts.js","sources":["pages/profile/settings/userPosts.vue","D:/HTML5/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNccHJvZmlsZVxzZXR0aW5nc1x1c2VyUG9zdHMudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\" :style=\"{backgroundColor: primaryColor}\">\n      <back-icon iconSize=\"50\" @click=\"goBack\" class=\"back-icon\"></back-icon>\n      <text class=\"page-title\">æˆ‘çš„åŠ¨æ€</text>\n    </view>\n    \n    <view class=\"filter-bar\">\n      <input \n        class=\"search-input\" \n        placeholder=\"æœç´¢æ ‡é¢˜æˆ–æ ‡ç­¾\" \n        v-model=\"searchKeyword\"\n        @confirm=\"fetchUserPosts\"\n      />\n      \n      <view class=\"date-picker-box\" @click=\"showDatePicker = true\">\n        <text class=\"date-text\">{{ dateRangeText }}</text>\n        <text class=\"date-icon\">ğŸ“…</text>\n      </view>\n      <button class=\"search-btn\" :style=\"{backgroundColor: primaryColor}\" @click=\"fetchUserPosts\">æ£€ç´¢</button>\n    </view>\n    \n    <scroll-view scroll-y class=\"post-list\">\n      <view v-if=\"posts.length === 0\" class=\"no-post\">\n        <text>æš‚æ— åŠ¨æ€å†…å®¹</text>\n      </view>\r\n\t  \r\n\t  <view v-for=\"post in posts\" :key=\"post.id\" class=\"post-item\">\r\n\t\t  <view class=\"post-info-box\" @click=\"goToDetail(post.id)\">\r\n\t\t\t  <view class=\"post-header\">\r\n\t\t\t\t  <text class=\"post-title\">{{ post.title }}</text>\r\n\t\t\t\t  <text class=\"post-rating\">â˜… {{ post.rating.toFixed(1) }}</text>\r\n\t\t\t  </view>\r\n        Â  Â  Â  Â  Â Â \r\n\t\t      <view class=\"post-footer\">\r\n\t\t\t\t  <view class=\"post-actions\">\r\n\t\t\t\t\t  <text class=\"action-btn\" @click.stop=\"goToDetail(post.id)\">æŸ¥çœ‹åŸå¸–</text> \r\n\t\t\t\t\t  <text class=\"action-btn delete-btn\" @click.stop=\"confirmDelete(post)\">åˆ é™¤</text>\r\n\t\t\t\t  </view>\r\n\t\t\t\t  \r\n\t\t\t\t  <text v-if=\"post.images.length > 0\" class=\"post-date\">{{ post.date }}</text>\r\n\t\t\t\t  <text v-else class=\"post-date-full\">{{ post.date }}</text>\r\n\t\t\t  </view>\r\n        Â  Â </view>\r\n\t\t</view>   \n    </scroll-view>  \r\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      primaryColor: '#00CC99',\n      searchKeyword: '',\n      startDate: null,\n      endDate: null,\n      showDatePicker: false,\n      \n      // æ¨¡æ‹Ÿç”¨æˆ·åŠ¨æ€æ•°æ®\n      posts: [\n        { id: 1, title: 'ç©ºæ‚²åˆ‡', rating: 4.8, date: '2023-12-09', images: ['/static/img1.jpg'] },\n        { id: 2, title: 'ä»Šæ—¥ä»½ç¾é£Ÿåˆ†äº«', rating: 4.5, date: '2025-12-08', images: ['/static/food1.jpg'] },\n        { id: 3, title: 'å…³äºuni-appçš„ä¸€äº›å¿ƒå¾—', rating: 3.9, date: '2025-12-07', images: [] },\n      ]\n    };\n  },\n  computed: {\n    dateRangeText() {\n      if (this.startDate && this.endDate) {\n        return `${this.startDate} è‡³ ${this.endDate}`;\n      }\n      return 'é€‰æ‹©æ—¥æœŸèŒƒå›´';\n    }\n  },\n  onLoad() {\n    this.fetchUserPosts();\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    \n    // æ¨¡æ‹Ÿæ—¥æœŸé€‰æ‹©å™¨ç¡®è®¤ (éœ€è¦å®é™…ç»„ä»¶æ”¯æŒ)\n    handleDateConfirm(e) {\n      // å‡è®¾ e.range åŒ…å«äº†èµ·å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ\n      this.startDate = e.range[0];\n      this.endDate = e.range[1];\n      this.showDatePicker = false;\n    },\n    \n    // æ¨¡æ‹Ÿè·å–ç”¨æˆ·å¸–å­åˆ—è¡¨\n    fetchUserPosts() {\n      // ** æ¨¡æ‹Ÿæ¥å£è°ƒç”¨ï¼šè·å–ç”¨æˆ·åŠ¨æ€ **\n      // æ¥å£ï¼š/api/user/posts\n      // å‚æ•°ï¼š{ keyword: this.searchKeyword, startDate: this.startDate, endDate: this.endDate }\n      /*\n      uni.request({ url: '/api/user/posts', data: {...}, success: (res) => {\n        this.posts = res.data.data;\n      }});\n      */\n      uni.showToast({ title: 'å¼€å§‹æ£€ç´¢/ç­›é€‰', icon: 'none' });\n    },\n    \n    // è·³è½¬åˆ°å¸–å­è¯¦æƒ…/ä¿®æ”¹é¡µ\n    goToDetail(postId) {\n      // å‡è®¾å¸–å­è¯¦æƒ…é¡µæ”¯æŒç¼–è¾‘\n      uni.navigateTo({\n        url: `postDetail?id=${postId}&edit=true`\n      });\n    },\n    \n    // äºŒæ¬¡ç¡®è®¤åˆ é™¤\n    confirmDelete(post) {\n      uni.showModal({\n        title: 'åˆ é™¤ç¡®è®¤',\n        content: `ä½ ç¡®å®šè¦åˆ é™¤å¸–å­ã€Š${post.title}ã€‹å—ï¼Ÿ`,\n        confirmText: 'ç¡®è®¤åˆ é™¤',\n        confirmColor: '#FF3B30',\n        success: (res) => {\n          if (res.confirm) {\n            this.deletePost(post);\n          }\n        }\n      });\n    },\n    \n    // æ‰§è¡Œåˆ é™¤æ“ä½œ\n    deletePost(post) {\n      // ** æ¨¡æ‹Ÿæ¥å£è°ƒç”¨ï¼šåˆ é™¤å¸–å­ **\n      // æ¥å£ï¼š/api/post/delete\n      // å‚æ•°ï¼š{ postId: post.id }\n      /*\n      uni.request({ url: '/api/post/delete', method: 'POST', data: { postId: post.id }, success: (res) => {\n        if (res.data.code === 0) {\n          uni.showToast({ title: 'åˆ é™¤æˆåŠŸ', icon: 'success' });\n          this.posts = this.posts.filter(p => p.id !== post.id); // ç§»é™¤\n        }\n      }});\n      */\n      \n      // ** ä¸´æ—¶æˆåŠŸæ¨¡æ‹Ÿ **\n      uni.showToast({ title: 'åˆ é™¤æˆåŠŸ', icon: 'success' });\n      this.posts = this.posts.filter(p => p.id !== post.id);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  height: 100vh;\n  background-color: #f7fff7;\n}\n\n/* --- é¡¶éƒ¨å¯¼èˆªæ  (ä¸ settings æ ·å¼ä¿æŒä¸€è‡´) --- */\n.header {\n  height: 90rpx;\n  display: flex;\n  align-items: center;\n  position: relative;\n  color: #ffffff;\n  font-weight: bold;\n  padding-top: var(--status-bar-height);\n  background-color: v-bind(primaryColor);\n}\n\n.back-icon {\n  position: absolute;\n  left: 30rpx;\n  font-size: 40rpx;\n  cursor: pointer;\n}\n\n.page-title {\n  flex: 1;\n  text-align: center;\n  font-size: 38rpx;\n  margin-right: 60rpx;\n}\n\n/* --- æœç´¢å’Œç­›é€‰åŒº --- */\n.filter-bar {\n  padding: 20rpx 30rpx;\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  border-bottom: 1rpx solid #eee;\n}\n\n.search-input {\n  flex: 2;\n  height: 70rpx;\n  background-color: #f7f7f7;\n  border-radius: 35rpx;\n  padding: 0 30rpx;\n  font-size: 30rpx;\n  margin-right: 20rpx;\n}\n\n.date-picker-box {\n  flex: 1.5;\n  height: 70rpx;\n  line-height: 70rpx;\n  background-color: #f7f7f7;\n  border-radius: 35rpx;\n  padding: 0 15rpx;\n  font-size: 26rpx;\n  color: #666;\n  margin-right: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.search-btn {\n  flex: 1;\n  height: 70rpx;\n  line-height: 70rpx;\n  font-size: 30rpx;\n  color: #fff;\n  padding: 0;\n  border-radius: 35rpx;\n}\n\n/* --- åŠ¨æ€åˆ—è¡¨åŒº --- */\n.post-list {\n    flex: 1;\n    padding: 20rpx 30rpx 20rpx 7rpx; \n}\n\n.no-post {\n  text-align: center;\n  padding: 50rpx;\n  color: #999;\n}\n\n.post-item {\n    display: block; \n    padding: 20rpx; /* ç»Ÿä¸€å·¦å³ padding */\n    border-bottom: 1rpx solid #eee;\n    background-color: #fff;\n    margin-bottom: 15rpx;\n    border-radius: 10rpx;\n}\n\n.post-info-box {\n    padding: 0;\n}\n\n.post-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 5rpx; /* å‡å°‘åº•éƒ¨é—´è· */\n}\n\n.post-title {\n    font-size: 32rpx;\n    font-weight: bold;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex: 1;\n    margin-right: 15rpx; /* ä¸è¯„åˆ†ä¿æŒè·ç¦» */\n}\n\n/* è¯„åˆ†ï¼šç§»åˆ°æ ‡é¢˜è¡Œå³ä¾§ */\n.post-rating {\n    font-size: 28rpx;\n    color: #FF9900; /* è¯„åˆ†é¢œè‰²çªå‡º */\n    font-weight: bold;\n    /* ä¿æŒå³ä¾§å®šä½ */\n}\n\n/* --- åº•éƒ¨æ“ä½œå’Œæ—¥æœŸåŒºåŸŸ --- */\n.post-footer {\n    /* ç¡®ä¿æ“ä½œå’Œæ—¥æœŸåœ¨æ ‡é¢˜ä¸‹æ–¹ */\n    display: block; \n}\n\n/* æ–°å¢ï¼šæ“ä½œæŒ‰é’®åŒºåŸŸ */\n.post-actions {\n    display: flex;\n    justify-content: flex-end; /* å³å¯¹é½æŒ‰é’® */\n    margin-top: 15rpx;\n    margin-bottom: 15rpx; /* æŒ‰é’®å’Œæ—¥æœŸä¹‹é—´ç•™å‡ºç©ºé—´ */\n}\n\n.action-btn {\n    font-size: 28rpx;\n    color: #666;\n    padding: 5rpx 15rpx;\n    border: 1rpx solid #ccc;\n    border-radius: 20rpx;\n    margin-left: 15rpx; /* æŒ‰é’®ä¹‹é—´é—´è· */\n}\n\n.delete-btn {\n    color: #FF3B30;\n    border-color: #FF3B30;\n}\n\n/* æ—¥æœŸæ ·å¼ç»Ÿä¸€ï¼Œå¹¶ç¡®ä¿é å³ */\n.post-date, .post-date-full {\n    font-size: 24rpx;\n    color: #999;\n    display: block;\n    text-align: right; /* æ—¥æœŸé å³æ˜¾ç¤º */\n    margin-top: 10rpx;\n}\n\n/* ç§»é™¤ä¸å¿…è¦çš„æ ·å¼ */\n.image-preview {\n    /* ç§»é™¤è¿™é‡Œçš„ flex å¸ƒå±€ï¼Œè®©å›¾ç‰‡å’Œæ—¥æœŸæ˜¾ç¤ºåœ¨ä¸åŒè¡Œ */\n    display: block;\n    margin-bottom: 10rpx;\n}\n.preview-img {\n    width: 120rpx;\n    height: 120rpx;\n    border-radius: 10rpx;\n    /* ç¡®ä¿å›¾ç‰‡é å·¦ */\n    display: block;\n    margin-right: 0; \n    margin-bottom: 10rpx;\n}\n</style>","import MiniProgramPage from 'C:/Users/HP/Desktop/è½¯ä»¶å·¥ç¨‹/demo1/DemonTest/pages/profile/settings/userPosts.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAkDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,eAAe;AAAA,MACf,WAAW;AAAA,MACX,SAAS;AAAA,MACT,gBAAgB;AAAA;AAAA,MAGhB,OAAO;AAAA,QACL,EAAE,IAAI,GAAG,OAAO,OAAO,QAAQ,KAAK,MAAM,cAAc,QAAQ,CAAC,kBAAkB,EAAG;AAAA,QACtF,EAAE,IAAI,GAAG,OAAO,WAAW,QAAQ,KAAK,MAAM,cAAc,QAAQ,CAAC,mBAAmB,EAAG;AAAA,QAC3F,EAAE,IAAI,GAAG,OAAO,kBAAkB,QAAQ,KAAK,MAAM,cAAc,QAAQ,GAAI;AAAA,MACjF;AAAA;EAEH;AAAA,EACD,UAAU;AAAA,IACR,gBAAgB;AACd,UAAI,KAAK,aAAa,KAAK,SAAS;AAClC,eAAO,GAAG,KAAK,SAAS,MAAM,KAAK,OAAO;AAAA,MAC5C;AACA,aAAO;AAAA,IACT;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,eAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAAA,IACP,SAAS;AACPA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,kBAAkB,GAAG;AAEnB,WAAK,YAAY,EAAE,MAAM,CAAC;AAC1B,WAAK,UAAU,EAAE,MAAM,CAAC;AACxB,WAAK,iBAAiB;AAAA,IACvB;AAAA;AAAA,IAGD,iBAAiB;AASfA,oBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAAA,IACjD;AAAA;AAAA,IAGD,WAAW,QAAQ;AAEjBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,iBAAiB,MAAM;AAAA,MAC9B,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,cAAc,MAAM;AAClBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,YAAY,KAAK,KAAK;AAAA,QAC/B,aAAa;AAAA,QACb,cAAc;AAAA,QACd,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,iBAAK,WAAW,IAAI;AAAA,UACtB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,WAAW,MAAM;AAcfA,oBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAQ,CAAG;AAChD,WAAK,QAAQ,KAAK,MAAM,OAAO,OAAK,EAAE,OAAO,KAAK,EAAE;AAAA,IACtD;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjJA,GAAG,WAAW,eAAe;"}