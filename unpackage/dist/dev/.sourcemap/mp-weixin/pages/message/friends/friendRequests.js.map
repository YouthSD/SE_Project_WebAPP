{"version":3,"file":"friendRequests.js","sources":["pages/message/friends/friendRequests.vue","D:/HTML5/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcbWVzc2FnZVxmcmllbmRzXGZyaWVuZFJlcXVlc3RzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    \n    <view class=\"header\" :style=\"{backgroundColor: primaryColor}\">\n      <back-icon iconSize=\"50\" @click=\"goBack\" class=\"back-icon\"></back-icon>\n      <text class=\"page-title\">好友请求 ({{ requests.length }})</text>\n    </view>\n    \n    <scroll-view scroll-y class=\"request-list\">\n      <view v-if=\"requests.length === 0\" class=\"no-request\">\n        <text>暂无新的好友请求</text>\n      </view>\n      \n      <view v-for=\"request in requests\" :key=\"request.id\" class=\"request-item\">\n        <image :src=\"request.avatar\" class=\"avatar\" mode=\"aspectFill\"></image>\n        <view class=\"request-info\">\n          <text class=\"request-user-nickname\">{{ request.nickname }}</text>\n          <text class=\"request-message\">{{ request.message || '请求添加你为好友' }}</text>\n        </view>\n        <view class=\"action-box\">\n          <button \n            v-if=\"request.status === 'pending'\"\n            class=\"action-btn accept-btn\" \n            :style=\"{backgroundColor: primaryColor}\"\n            @click=\"confirmAccept(request)\"\n          >\n            接受\n          </button>\n          <text v-else class=\"status-text accepted-text\">已接受</text>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      primaryColor: '#00CC99',\n      \n      // 模拟好友请求数据\n      requests: [\n        { id: 301, userId: 201, nickname: '测试用户', avatar: '/static/avatar4.jpg', message: 'Hi，很高兴认识你！', status: 'pending' },\n        { id: 302, userId: 202, nickname: '老朋友B', avatar: '/static/avatar5.jpg', message: '我是B，以前的同学', status: 'pending' },\n        { id: 303, userId: 203, nickname: '已处理C', avatar: '/static/avatar6.jpg', message: '请求已过期', status: 'accepted' },\n      ]\n    };\n  },\n  onLoad() {\n    this.fetchRequests();\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    \n    // 模拟获取好友请求\n    fetchRequests() {\n      // ** 模拟接口调用：获取好友请求 **\n      // 接口：/api/friends/requests/list\n      /*\n      uni.request({ \n        url: '/api/friends/requests/list', \n        success: (res) => {\n          this.requests = res.data.data;\n        }\n      });\n      */\n    },\n    \n    // 确认接受好友请求\n    confirmAccept(request) {\n      uni.showModal({\n        title: '确认添加',\n        content: `确认添加 ${request.nickname} 为你的好友吗？`,\n        confirmText: '确认',\n        success: (res) => {\n          if (res.confirm) {\n            this.handleAccept(request);\n          }\n        }\n      });\n    },\n    \n    // 处理接受请求\n    handleAccept(request) {\n      // ** 模拟接口调用：接受好友请求 **\n      // 接口：/api/friends/accept\n      // 参数：{ requestId: request.id, requestingUserId: request.userId }\n      /*\n      uni.request({ \n        url: '/api/friends/accept', \n        method: 'POST', \n        data: { requestId: request.id },\n        success: (res) => {\n          if (res.data.code === 0) {\n            uni.showToast({ title: `已添加 ${request.nickname}`, icon: 'success' });\n            request.status = 'accepted'; // 更新状态\n          } else {\n            uni.showToast({ title: res.data.message || '接受失败', icon: 'none' });\n          }\n        }\n      });\n      */\n      \n      // ** 临时成功模拟 **\n      uni.showToast({ title: `已添加 ${request.nickname}`, icon: 'success' });\n      request.status = 'accepted'; \n      // 刷新列表 (在实际中，可能需要重新获取或从列表中移除已处理项)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f7fff7;\n}\n\n/* --- 顶部导航栏 (与 friendList 样式保持一致) --- */\n.header {\n  height: 90rpx;\n  display: flex;\n  align-items: center;\n  position: relative;\n  color: #ffffff;\n  font-weight: bold;\n  padding-top: var(--status-bar-height);\n  background-color: v-bind(primaryColor);\n}\n\n.back-icon {\n  position: absolute;\n  left: 30rpx;\n  font-size: 40rpx;\n  cursor: pointer;\n}\n\n.page-title {\n  flex: 1;\n  text-align: center;\n  font-size: 38rpx;\n  margin-right: 60rpx;\n}\n\n/* --- 请求列表区 --- */\n.request-list {\n  flex: 1;\n  background-color: #ffffff;\n}\n\n.no-request {\n  text-align: center;\n  padding: 50rpx;\n  color: #999;\n}\n\n.request-item {\n  display: flex;\n  padding: 20rpx 30rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n  align-items: center;\n}\n\n.avatar {\n  width: 100rpx;\n  height: 100rpx;\n  border-radius: 50%;\n  margin-right: 20rpx;\n}\n\n.request-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.request-user-nickname {\n  font-size: 34rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.request-message {\n  font-size: 26rpx;\n  color: #999;\n  margin-top: 5rpx;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.action-box {\n  width: 150rpx;\n  text-align: right;\n}\n\n.action-btn {\n  height: 60rpx;\n  line-height: 60rpx;\n  font-size: 28rpx;\n  color: #fff;\n  padding: 0 10rpx;\n  border-radius: 30rpx;\n  margin: 0;\n}\n\n.status-text {\n  font-size: 28rpx;\n  color: #ccc;\n}\n\n.accepted-text {\n  color: v-bind(primaryColor);\n}\n</style>","import MiniProgramPage from 'C:/Users/HP/Desktop/软件工程/demo1/DemonTest/pages/message/friends/friendRequests.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAoCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA;AAAA,MAGd,UAAU;AAAA,QACR,EAAE,IAAI,KAAK,QAAQ,KAAK,UAAU,QAAQ,QAAQ,uBAAuB,SAAS,cAAc,QAAQ,UAAW;AAAA,QACnH,EAAE,IAAI,KAAK,QAAQ,KAAK,UAAU,QAAQ,QAAQ,uBAAuB,SAAS,aAAa,QAAQ,UAAW;AAAA,QAClH,EAAE,IAAI,KAAK,QAAQ,KAAK,UAAU,QAAQ,QAAQ,uBAAuB,SAAS,SAAS,QAAQ,WAAY;AAAA,MACjH;AAAA;EAEH;AAAA,EACD,SAAS;AACP,SAAK,cAAa;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACP,SAAS;AACPA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,gBAAgB;AAAA,IAWf;AAAA;AAAA,IAGD,cAAc,SAAS;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,QAAQ,QAAQ,QAAQ;AAAA,QACjC,aAAa;AAAA,QACb,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,iBAAK,aAAa,OAAO;AAAA,UAC3B;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,aAAa,SAAS;AAqBpBA,oBAAAA,MAAI,UAAU,EAAE,OAAO,OAAO,QAAQ,QAAQ,IAAI,MAAM,UAAW,CAAA;AACnE,cAAQ,SAAS;AAAA,IAEnB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/GA,GAAG,WAAW,eAAe;"}