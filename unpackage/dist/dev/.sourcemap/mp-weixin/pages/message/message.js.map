{"version":3,"file":"message.js","sources":["pages/message/message.vue","D:/HTML5/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzc2FnZS9tZXNzYWdlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    \n    <view class=\"header\" :style=\"{backgroundColor: primaryColor}\">\n      <text class=\"page-title\">æ¶ˆæ¯</text>\n    </view>\n    \n    <view class=\"feature-buttons\">\n      <view class=\"button-item\" @click=\"goToPage('friendList')\">\n        <text class=\"icon\">ğŸ‘¥</text>\n        <text class=\"text\">å¥½å‹åˆ—è¡¨</text>\n      </view>\n      <view class=\"button-item\" @click=\"goToPage('addFriend')\">\n        <text class=\"icon\">â•</text>\n        <text class=\"text\">æ·»åŠ å¥½å‹</text>\n      </view>\n      <view class=\"button-item request-item\" @click=\"goToPage('friendRequests')\">\n        <text class=\"icon\">âœ‰ï¸</text>\n        <text class=\"text\">å¥½å‹è¯·æ±‚</text>\n        <view v-if=\"requestCount > 0\" class=\"badge\" :style=\"{backgroundColor: accentColor}\">{{ requestCount }}</view>\n      </view>\n      <view class=\"button-item\" @click=\"showFeatureNotImplemented\">\n        <text class=\"icon\">â„¹ï¸</text>\n        <text class=\"text\">å…³äºæˆ‘çš„</text>\n      </view>\n    </view>\n    \n    <scroll-view scroll-y class=\"message-list\">\n      <view v-if=\"messages.length === 0\" class=\"no-message\">\n        <text>æš‚æ— æ–°æ¶ˆæ¯</text>\n      </view>\n      \n      <view \n        v-for=\"msg in messages\" \n        :key=\"msg.id\" \n        class=\"message-item\" \n        @click=\"goToChat(msg.friendId, msg.friendName)\"\n      >\n        <image :src=\"msg.avatar\" class=\"avatar\" mode=\"aspectFill\"></image>\n        <view class=\"message-content\">\n          <view class=\"info-line\">\n            <text class=\"friend-name\">{{ msg.friendName }}</text>\n            <text class=\"timestamp\">{{ msg.time }}</text>\n          </view>\n          <text class=\"last-message\">{{ msg.lastMessage }}</text>\n        </view>\n      </view>\n      \n    </scroll-view>\n    \n    <view class=\"tab-bar\">\n      <view v-for=\"tab in tabs\" :key=\"tab.name\" class=\"tab-item\" @click=\"switchTab(tab.path)\">\n        <text class=\"tab-icon\" :class=\"{'active': tab.path === 'message'}\">{{ tab.icon }}</text>\n        <text \n          class=\"tab-text\" \n          :style=\"{color: tab.path === 'message' ? primaryColor : '#888'}\"\n        >\n          {{ tab.name }}\n        </text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      primaryColor: '#00CC99', \n      accentColor: '#FFD700',\n      requestCount: 3, // æ¨¡æ‹Ÿæœªå¤„ç†çš„å¥½å‹è¯·æ±‚æ•°é‡\r\n\t  tabs: [],\n      \n      // æ¨¡æ‹Ÿæ¶ˆæ¯åˆ—è¡¨æ•°æ®\n      messages: [\n        { id: 1, friendId: 101, friendName: 'å°ç»¿', avatar: '/static/avatar1.jpg', lastMessage: 'ä½ ä¸Šæ¬¡å‘çš„å¸–å­å¤ªæ£’äº†ï¼', time: '10:30' },\n        { id: 2, friendId: 102, friendName: 'ç¨‹åºçŒ¿', avatar: '/static/avatar2.jpg', lastMessage: '[å›¾ç‰‡] çœ‹çœ‹æˆ‘æ–°å†™çš„ä»£ç ', time: 'æ˜¨å¤©' },\n        { id: 3, friendId: 103, friendName: 'è€åƒå®¶', avatar: '/static/avatar3.jpg', lastMessage: 'å¥½çš„ï¼Œæ˜å¤©è§', time: 'å‘¨ä¸€' },\n      ],\n    };\n  },\n  onShow() {\n    this.fetchMessages();\n    this.fetchRequestCount();\n  },\n  methods: {\n    // æ¨¡æ‹Ÿè·å–æ¶ˆæ¯åˆ—è¡¨\n    fetchMessages() {\n      // ** æ¨¡æ‹Ÿæ¥å£è°ƒç”¨ï¼šè·å–æ¶ˆæ¯åˆ—è¡¨ **\n      // æ¥å£ï¼š/api/messages/list\n      /*\n      uni.request({ url: '/api/messages/list', success: (res) => {\n        this.messages = res.data.data;\n      }});\n      */\n    },\n    \n    // æ¨¡æ‹Ÿè·å–å¥½å‹è¯·æ±‚æ•°é‡\n    fetchRequestCount() {\n      // ** æ¨¡æ‹Ÿæ¥å£è°ƒç”¨ï¼šè·å–å¥½å‹è¯·æ±‚æ•°é‡ **\n      // æ¥å£ï¼š/api/friends/requests/count\n      /*\n      uni.request({ url: '/api/friends/requests/count', success: (res) => {\n        this.requestCount = res.data.data.count;\n      }});\n      */\n    },\n    \n    // è·³è½¬åˆ°èŠå¤©é¡µé¢\n    goToChat(friendId, friendName) {\n      // å‡è®¾èŠå¤©é¡µé¢ä¸º chat.vue\n      uni.navigateTo({\n        url: `chat?id=${friendId}&name=${friendName}`\n      });\n    },\n    \n    // è·³è½¬åˆ°åŠŸèƒ½é¡µé¢\n    goToPage(pageName) {\n      // å‡è®¾è¿™äº›é¡µé¢éƒ½åœ¨å½“å‰ Tab çš„å­ç›®å½•ä¸‹ï¼Œæˆ–è€…å·²ç»é…ç½®äº†å…¨å±€è·¯ç”±\r\n      let path = '';\r\n          \r\n      // æ ¹æ® pageName æ„é€ å®Œæ•´çš„ç»å¯¹è·¯å¾„\r\n      if (pageName === 'friendList') {\r\n      \tpath = '/pages/message/friends/friendList'; \r\n      } else if (pageName === 'friendRequests') {\r\n          path = '/pages/message/friends/friendRequests';\r\n      } else if (pageName === 'addFriend') {\r\n         path = '/pages/message/friends/addFriend';\r\n      }\r\n          \r\n      if (path) {\r\n          uni.navigateTo({\r\n              url: path\r\n          });\r\n      }\n    },\n    \n    showFeatureNotImplemented() {\n      uni.showToast({\n        title: 'è¯¥åŠŸèƒ½æš‚æœªå®ç°',\n        icon: 'none'\n      });\n    },\n    \n    // åº•éƒ¨å¯¼èˆªåˆ‡æ¢\n    switchTab(path) {\n      uni.switchTab({ url: path });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f0f8f0;\n}\n\n/* --- é¡¶éƒ¨å¯¼èˆªæ  --- */\n.header {\n  height: 90rpx;\n  line-height: 90rpx;\n  text-align: center;\n  color: #ffffff;\n  font-size: 38rpx;\n  font-weight: bold;\n  padding-top: var(--status-bar-height);\n  z-index: 10;\n}\n\n/* --- æ ¸å¿ƒåŠŸèƒ½æŒ‰é’®åŒº --- */\n.feature-buttons {\n  display: flex;\n  justify-content: space-around;\n  padding: 30rpx 0;\n  background-color: #ffffff;\n  border-bottom: 1rpx solid #eee;\n}\n\n.button-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 25%;\n  position: relative;\n}\n\n.button-item .icon {\n  font-size: 50rpx;\n  margin-bottom: 10rpx;\n}\n\n.button-item .text {\n  font-size: 26rpx;\n  color: #333;\n}\n\n.badge {\n  position: absolute;\n  top: 0;\n  right: 15rpx;\n  min-width: 30rpx;\n  height: 30rpx;\n  line-height: 30rpx;\n  border-radius: 15rpx;\n  color: #333;\n  font-size: 20rpx;\n  text-align: center;\n  padding: 0 5rpx;\n}\n\n/* --- æ¶ˆæ¯åˆ—è¡¨åŒº --- */\n.message-list {\n  flex: 1;\n}\n\n.no-message {\n  text-align: center;\n  padding: 50rpx;\n  color: #999;\n}\n\n.message-item {\n  display: flex;\n  padding: 20rpx 30rpx;\n  background-color: #ffffff;\n  border-bottom: 1rpx solid #eee;\n  align-items: center;\n}\n\n.avatar {\n  width: 90rpx;\n  height: 90rpx;\n  border-radius: 50%;\n  margin-right: 20rpx;\n}\n\n.message-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.info-line {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 5rpx;\n}\n\n.friend-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.timestamp {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.last-message {\n  font-size: 28rpx;\n  color: #666;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>","import MiniProgramPage from 'C:/Users/HP/Desktop/è½¯ä»¶å·¥ç¨‹/demo1/DemonTest/pages/message/message.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAiEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,aAAa;AAAA,MACb,cAAc;AAAA;AAAA,MACjB,MAAM,CAAE;AAAA;AAAA,MAGL,UAAU;AAAA,QACR,EAAE,IAAI,GAAG,UAAU,KAAK,YAAY,MAAM,QAAQ,uBAAuB,aAAa,eAAe,MAAM,QAAS;AAAA,QACpH,EAAE,IAAI,GAAG,UAAU,KAAK,YAAY,OAAO,QAAQ,uBAAuB,aAAa,iBAAiB,MAAM,KAAM;AAAA,QACpH,EAAE,IAAI,GAAG,UAAU,KAAK,YAAY,OAAO,QAAQ,uBAAuB,aAAa,UAAU,MAAM,KAAM;AAAA,MAC9G;AAAA;EAEJ;AAAA,EACD,SAAS;AACP,SAAK,cAAa;AAClB,SAAK,kBAAiB;AAAA,EACvB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,gBAAgB;AAAA,IAQf;AAAA;AAAA,IAGD,oBAAoB;AAAA,IAQnB;AAAA;AAAA,IAGD,SAAS,UAAU,YAAY;AAE7BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,WAAW,QAAQ,SAAS,UAAU;AAAA,MAC7C,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,SAAS,UAAU;AAEjB,UAAI,OAAO;AAGX,UAAI,aAAa,cAAc;AAC9B,eAAO;AAAA,MACR,WAAW,aAAa,kBAAkB;AACtC,eAAO;AAAA,MACX,WAAW,aAAa,aAAa;AAClC,eAAO;AAAA,MACV;AAEA,UAAI,MAAM;AACNA,sBAAAA,MAAI,WAAW;AAAA,UACX,KAAK;AAAA,QACT,CAAC;AAAA,MACL;AAAA,IACD;AAAA,IAED,4BAA4B;AAC1BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,UAAU,MAAM;AACdA,oBAAAA,MAAI,UAAU,EAAE,KAAK,KAAM,CAAA;AAAA,IAC7B;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpJA,GAAG,WAAW,eAAe;"}