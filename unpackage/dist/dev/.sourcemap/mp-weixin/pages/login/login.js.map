{"version":3,"file":"login.js","sources":["pages/login/login.vue","D:/HTML5/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\">\n      <text class=\"back-btn\" @click=\"goBack\">返回</text>\n      <text class=\"page-title\">账号登录</text>\n    </view>\n\n    <view class=\"form-area\">\n      <view class=\"input-group\">\n        <text class=\"label\">用户名</text>\n        <input \n          class=\"input-field\" \n          type=\"text\" \n          placeholder=\"请输入用户名 (<=20字符，无空格)\" \n          v-model=\"username\"\n          @input=\"validateUsername\"\n        />\n        <text v-if=\"usernameError\" class=\"error-tip\">{{ usernameError }}</text>\n      </view>\n\n      <view class=\"input-group\">\n        <text class=\"label\">密码</text>\n        <input \n          class=\"input-field\" \n          type=\"password\" \n          placeholder=\"请输入密码 (6-20位)\" \n          v-model=\"password\"\n          @input=\"validatePassword\"\n        />\n        <text v-if=\"passwordError\" class=\"error-tip\">{{ passwordError }}</text>\n      </view>\n\n      <button \n        class=\"login-btn\" \n        :style=\"{backgroundColor: primaryColor}\"\n        :disabled=\"!isFormValid\"\n        @click=\"handleLogin\"\n      >\n        登 录\n      </button>\n    </view>\n\n    <view class=\"footer-link\">\n      <text class=\"text\">没有账户？</text>\n      <text class=\"register-link\" :style=\"{color: primaryColor}\" @click=\"goToRegister\">点击注册</text>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      primaryColor: '#00CC99',\n      username: '',\n      password: '',\n      usernameError: '',\n      passwordError: '',\n    };\n  },\n  computed: {\n    // 判断表单是否合法，启用登录按钮\n    isFormValid() {\n      return this.username.length > 0 && this.password.length > 0 && !this.usernameError && !this.passwordError;\n    }\n  },\n  methods: {\n    // 返回到程序开始页\n    goBack() {\n      uni.navigateBack({\n        delta: 1 // 返回上一页\n      }).catch(() => {\n        // 如果当前是第一页，则直接重定向到 index\n        uni.redirectTo({\n          url: '/pages/index/index'\n        });\n      });\n    },\n    // 跳转到注册页\n    goToRegister() {\n      uni.navigateTo({\n        url: '/pages/register/register'\n      });\n    },\n    \n    // --- 前端校验逻辑 ---\n    validateUsername() {\n      this.usernameError = '';\n      if (this.username.includes(' ')) {\n        this.usernameError = '用户名不能包含空格';\n      } else if (this.username.length > 20) {\n        this.usernameError = '用户名长度不能超过20';\n      }\n    },\n    validatePassword() {\n      this.passwordError = '';\n      if (this.password.length < 6 || this.password.length > 20) {\n        this.passwordError = '密码长度必须在6-20位之间';\n      }\n    },\n\n    // --- 登录处理 ---\n    handleLogin() {\n      // 最终校验（防止绕过@input校验）\n      this.validateUsername();\n      this.validatePassword();\n\n      if (!this.isFormValid) {\n        uni.showToast({\n          title: '请检查输入项',\n          icon: 'none',\n          duration: 2000\n        });\n        return;\n      }\n\n      // ** 模拟接口调用 **\n      // 模拟调用：/api/login\n      // 接口参数：{ username: this.username, password: this.password }\n      /*\n      uni.request({\n        url: '/api/login', // 替换为您的实际接口地址\n        method: 'POST',\n        data: {\n          username: this.username,\n          password: this.password\n        },\n        success: (res) => {\n          if (res.data.code === 0) { // 假设 code=0 为成功\n            uni.showToast({ title: '登录成功', icon: 'success' });\n            uni.redirectTo({ url: 'home' }); // 跳转到程序首页\n          } else {\n            uni.showModal({\n              title: '登录失败',\n              content: res.data.message || '用户名或密码错误',\n              showCancel: false\n            });\n            this.passwordError = '用户名或密码错误';\n            this.password = ''; // 清空密码\n          }\n        },\n        fail: () => {\n          uni.showModal({\n            title: '登录失败',\n            content: '网络错误，请稍后再试',\n            showCancel: false\n          });\n        }\n      });\n      */\n      \n      // ** 前端逻辑判断 (临时) **\n      // 约定: 假设测试账号 'admin' 和密码 '123456' 登录成功\n      if (this.username === 'admin' && this.password === '123456') {\n        uni.showToast({ title: '登录成功', icon: 'success' });\n        // ** 跳转到程序首页 (这里假设首页为 home.vue) **\n        uni.switchTab({\n          url: '/pages/home/home' \n        });\n      } else {\n        uni.showModal({\n          title: '登录失败',\n          content: '用户名或密码错误',\n          showCancel: false\n        });\n        this.passwordError = '用户名或密码错误';\n        this.password = ''; // 清空密码\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  padding: 40rpx;\n  background-color: #ffffff;\n  min-height: 100vh;\n}\n\n/* --- 头部和返回按钮 --- */\n.header {\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-bottom: 80rpx;\n}\n\n.back-btn {\n  position: absolute;\n  left: 0;\n  color: #666;\n  font-size: 32rpx;\n}\n\n.page-title {\n  flex: 1;\n  text-align: center;\n  font-size: 40rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n/* --- 表单区域 --- */\n.form-area {\n  margin-top: 100rpx;\n}\n\n.input-group {\n  margin-bottom: 40rpx;\n}\n\n.label {\n  display: block;\n  font-size: 30rpx;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.input-field {\n  width: 100%;\n  height: 90rpx;\n  padding: 0 20rpx;\n  border: 1rpx solid #e0e0e0;\n  border-radius: 15rpx;\n  font-size: 32rpx;\n  background-color: #f9f9f9;\n}\n\n.error-tip {\n  display: block;\n  color: #ff4d4f; /* 红色错误提示 */\n  font-size: 24rpx;\n  margin-top: 5rpx;\n}\n\n.login-btn {\n  width: 100%;\n  height: 100rpx;\n  line-height: 100rpx;\n  font-size: 36rpx;\n  color: #ffffff;\n  border-radius: 50rpx;\n  margin-top: 60rpx;\n  box-shadow: 0 5rpx 15rpx rgba(0, 204, 153, 0.4);\n}\n\n.login-btn[disabled] {\n  opacity: 0.6;\n}\n\n/* --- 底部链接 --- */\n.footer-link {\n  text-align: center;\n  margin-top: 50rpx;\n  font-size: 28rpx;\n}\n\n.text {\n  color: #999;\n  margin-right: 10rpx;\n}\n\n.register-link {\n  font-weight: bold;\n}\n</style>","import MiniProgramPage from 'C:/Users/HP/Desktop/软件工程/demo1/DemonTest/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAkDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,UAAU;AAAA,MACV,UAAU;AAAA,MACV,eAAe;AAAA,MACf,eAAe;AAAA;EAElB;AAAA,EACD,UAAU;AAAA;AAAA,IAER,cAAc;AACZ,aAAO,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,KAAK,CAAC,KAAK,iBAAiB,CAAC,KAAK;AAAA,IAC9F;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,SAAS;AACPA,oBAAAA,MAAI,aAAa;AAAA,QACf,OAAO;AAAA;AAAA,OACR,EAAE,MAAM,MAAM;AAEbA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QACP,CAAC;AAAA,MACH,CAAC;AAAA,IACF;AAAA;AAAA,IAED,eAAe;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,mBAAmB;AACjB,WAAK,gBAAgB;AACrB,UAAI,KAAK,SAAS,SAAS,GAAG,GAAG;AAC/B,aAAK,gBAAgB;AAAA,MACvB,WAAW,KAAK,SAAS,SAAS,IAAI;AACpC,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACD;AAAA,IACD,mBAAmB;AACjB,WAAK,gBAAgB;AACrB,UAAI,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,IAAI;AACzD,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AAEZ,WAAK,iBAAgB;AACrB,WAAK,iBAAgB;AAErB,UAAI,CAAC,KAAK,aAAa;AACrBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AACD;AAAA,MACF;AAuCA,UAAI,KAAK,aAAa,WAAW,KAAK,aAAa,UAAU;AAC3DA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAQ,CAAG;AAEhDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,KAAK;AAAA,QACP,CAAC;AAAA,aACI;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QACd,CAAC;AACD,aAAK,gBAAgB;AACrB,aAAK,WAAW;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;ACzKA,GAAG,WAAW,eAAe;"}