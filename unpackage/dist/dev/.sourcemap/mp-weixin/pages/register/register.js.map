{"version":3,"file":"register.js","sources":["pages/register/register.vue","D:/HTML5/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\">\n      <text class=\"back-btn\" @click=\"goBack\">返回</text>\n      <text class=\"page-title\">用户注册</text>\n    </view>\n\n    <view class=\"form-area\">\n      <view class=\"input-group\">\n        <text class=\"label\">用户名</text>\n        <input \n          class=\"input-field\" \n          type=\"text\" \n          placeholder=\"请输入用户名 (<=20字符，无空格，唯一)\" \n          v-model=\"username\"\n          @input=\"validateUsername\"\n        />\n        <text v-if=\"usernameError\" class=\"error-tip\">{{ usernameError }}</text>\n      </view>\n\n      <view class=\"input-group\">\n        <text class=\"label\">昵称</text>\n        <input \n          class=\"input-field\" \n          type=\"text\" \n          placeholder=\"请输入昵称\" \n          v-model=\"nickname\"\n          @input=\"validateNickname\"\n        />\n        <text v-if=\"nicknameError\" class=\"error-tip\">{{ nicknameError }}</text>\n      </view>\n\n      <view class=\"input-group\">\n        <text class=\"label\">密码</text>\n        <input \n          class=\"input-field\" \n          type=\"password\" \n          placeholder=\"请输入密码 (6-20位)\" \n          v-model=\"password\"\n          @input=\"validatePassword\"\n        />\n        <view class=\"password-status\">\n          <text v-if=\"passwordError\" class=\"error-tip\">{{ passwordError }}</text>\n          <text :style=\"{color: strengthColor}\" class=\"strength-tip\">强度: {{ passwordStrength }}</text>\n        </view>\n      </view>\n\n      <view class=\"input-group\">\n        <text class=\"label\">确认密码</text>\n        <input \n          class=\"input-field\" \n          type=\"password\" \n          placeholder=\"请再次输入密码\" \n          v-model=\"confirmPassword\"\n          @input=\"validateConfirmPassword\"\n        />\n        <text v-if=\"confirmPasswordError\" class=\"error-tip\">{{ confirmPasswordError }}</text>\n      </view>\n\n      <button \n        class=\"register-btn\" \n        :style=\"{backgroundColor: primaryColor}\"\n        :disabled=\"!isFormValid\"\n        @click=\"handleRegister\"\n      >\n        注 册\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      primaryColor: '#00CC99',\n      username: '',\n      nickname: '',\n      password: '',\n      confirmPassword: '',\n      usernameError: '',\n      nicknameError: '',\n      passwordError: '',\n      confirmPasswordError: '',\n    };\n  },\n  computed: {\n    // 计算密码强度分数\n    passwordScore() {\n      let score = 0;\n      const pwd = this.password;\n      \n      if (pwd.length >= 8) score += 1;\n      if (/[a-z]/.test(pwd)) score += 1; // 包含小写字母\n      if (/[A-Z]/.test(pwd)) score += 1; // 包含大写字母\n      if (/\\d/.test(pwd)) score += 1; // 包含数字\n      if (/[^A-Za-z0-9]/.test(pwd)) score += 1; // 包含特殊字符\n      \n      return score;\n    },\n    // 根据分数显示密码强度文字\n    passwordStrength() {\n      const score = this.passwordScore;\n      if (score <= 2) return '弱';\n      if (score <= 4) return '中等';\n      return '强';\n    },\n    // 根据强度显示颜色\n    strengthColor() {\n      const score = this.passwordScore;\n      if (score <= 2) return '#ff4d4f'; // 红色\n      if (score <= 4) return '#ff9900'; // 橙色\n      return '#00CC99'; // 绿色\n    },\n    // 判断表单是否合法，启用注册按钮\n    isFormValid() {\n      return (\n        this.username.length > 0 &&\n        this.nickname.length > 0 &&\n        this.password.length > 0 &&\n        this.confirmPassword.length > 0 &&\n        !this.usernameError &&\n        !this.nicknameError &&\n        !this.passwordError &&\n        !this.confirmPasswordError\n      );\n    }\n  },\n  methods: {\n    // 返回到程序开始页\n    goBack() {\n      uni.navigateBack({\n        delta: 1\n      }).catch(() => {\n        uni.redirectTo({\n          url: '/pages/index/index'\n        });\n      });\n    },\n\n    // --- 前端校验逻辑 ---\n    validateUsername() {\n      this.usernameError = '';\n      const val = this.username.trim();\n      this.username = val; // 移除首尾空格，但内部空格仍会触发错误\n      if (val.includes(' ')) {\n        this.usernameError = '用户名不能包含空格';\n      } else if (val.length === 0) {\n        this.usernameError = '用户名不能为空';\n      } else if (val.length > 20) {\n        this.usernameError = '用户名长度不能超过20';\n      }\n    },\n    validateNickname() {\n      this.nicknameError = '';\n      if (this.nickname.length === 0) {\n         this.nicknameError = '昵称不能为空';\n      }\n      // 可以根据需要添加其他昵称校验，例如长度限制\n    },\n    validatePassword() {\n      this.passwordError = '';\n      if (this.password.length < 6 || this.password.length > 20) {\n        this.passwordError = '密码长度必须在6-20位之间';\n      }\n      this.validateConfirmPassword(); // 密码变化时同时校验确认密码\n    },\n    validateConfirmPassword() {\n      this.confirmPasswordError = '';\n      if (this.confirmPassword.length === 0) {\n        // 不做提示，以免干扰\n      } else if (this.confirmPassword !== this.password) {\n        this.confirmPasswordError = '两次密码不一致';\n      }\n    },\n\n    // 清空并提示错误\n    showError(inputName, msg) {\n      this[`${inputName}Error`] = msg;\n      this[inputName] = '';\n      uni.showModal({\n        title: '注册错误',\n        content: msg,\n        showCancel: false\n      });\n    },\n\n    // --- 注册处理 ---\n    handleRegister() {\n      // 最终校验\n      this.validateUsername();\n      this.validateNickname();\n      this.validatePassword();\n      this.validateConfirmPassword();\n\n      if (!this.isFormValid) {\n        uni.showToast({\n          title: '请检查输入项',\n          icon: 'none',\n          duration: 2000\n        });\n        return;\n      }\n\n      // ** 模拟接口调用 **\n      // 模拟调用：/api/register\n      // 接口参数：{ username: this.username, nickname: this.nickname, password: this.password }\n      /*\n      uni.request({\n        url: '/api/register', // 替换为您的实际接口地址\n        method: 'POST',\n        data: {\n          username: this.username,\n          nickname: this.nickname,\n          password: this.password\n        },\n        success: (res) => {\n          if (res.data.code === 0) { // 假设 code=0 为成功\n            uni.showToast({ title: '注册成功', icon: 'success' });\n            uni.redirectTo({ url: 'home' }); // 跳转到程序首页\n          } else {\n            // 如果接口返回用户名已被占用等错误\n            uni.showModal({\n              title: '注册失败',\n              content: res.data.message || '注册失败，请稍后再试',\n              showCancel: false\n            });\n            // 假设后端返回具体错误信息，例如:\n            // if (res.data.field === 'username') this.showError('username', res.data.message);\n          }\n        },\n        fail: () => {\n          uni.showModal({\n            title: '注册失败',\n            content: '网络错误，请稍后再试',\n            showCancel: false\n          });\n        }\n      });\n      */\n      \n      // ** 前端逻辑判断 (临时) **\n      uni.showToast({ title: '注册成功', icon: 'success' });\n      // ** 跳转到程序首页 (这里假设首页为 home.vue) **\n      uni.switchTab({\n        url: '/pages/home/home' \n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  padding: 40rpx;\n  background-color: #ffffff;\n  min-height: 100vh;\n}\n\n/* --- 头部和返回按钮 --- */\n.header {\n  display: flex;\n  align-items: center;\n  position: relative;\n  margin-bottom: 80rpx;\n}\n\n.back-btn {\n  position: absolute;\n  left: 0;\n  color: #666;\n  font-size: 32rpx;\n}\n\n.page-title {\n  flex: 1;\n  text-align: center;\n  font-size: 40rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n/* --- 表单区域 --- */\n.form-area {\n  margin-top: 50rpx;\n}\n\n.input-group {\n  margin-bottom: 40rpx;\n}\n\n.label {\n  display: block;\n  font-size: 30rpx;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.input-field {\n  width: 100%;\n  height: 90rpx;\n  padding: 0 20rpx;\n  border: 1rpx solid #e0e0e0;\n  border-radius: 15rpx;\n  font-size: 32rpx;\n  background-color: #f9f9f9;\n}\n\n.password-status {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 5rpx;\n}\n\n.error-tip {\n  color: #ff4d4f; /* 红色错误提示 */\n  font-size: 24rpx;\n}\n\n.strength-tip {\n  font-size: 24rpx;\n  font-weight: bold;\n}\n\n.register-btn {\n  width: 100%;\n  height: 100rpx;\n  line-height: 100rpx;\n  font-size: 36rpx;\n  color: #ffffff;\n  border-radius: 50rpx;\n  margin-top: 60rpx;\n  box-shadow: 0 5rpx 15rpx rgba(0, 204, 153, 0.4);\n}\n\n.register-btn[disabled] {\n  opacity: 0.6;\n}\n</style>","import MiniProgramPage from 'C:/Users/HP/Desktop/软件工程/demo1/DemonTest/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}